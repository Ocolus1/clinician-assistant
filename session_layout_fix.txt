                  </div>
                </SessionDetailsLayout>
              </TabsContent>
            </div>

            {/* Footer with navigation and submit buttons */}
            <div className="pt-2 border-t flex justify-between items-center">
              <div className="flex items-center">
                {activeTab !== "details" && (
                  <Button
                    type="button"
                    variant="outline"
                    onClick={handleBack}
                    className="mr-2"
                  >
                    <ChevronLeft className="h-4 w-4 mr-1" />
                    Back
                  </Button>
                )}
                {activeTab !== "performance" && (
                  <Button
                    type="button"
                    onClick={handleNext}
                    variant="ghost"
                  >
                    Next
                    <ChevronRight className="h-4 w-4 ml-1" />
                  </Button>
                )}
              </div>

              <div className="flex items-center space-x-2">
                <Button
                  type="button"
                  variant="outline"
                  onClick={() => onOpenChange(false)}
                >
                  Cancel
                </Button>
                {activeTab === "performance" && (
                  <Button 
                    type="submit"
                    disabled={createSessionMutation.isPending}
                  >
                    {createSessionMutation.isPending ? "Creating..." : "Create Session"}
                  </Button>
                )}
              </div>
            </div>
          </form>
        </Form>
      </Tabs>

      {/* Strategy selection dialog */}
      <StrategySelectionDialog
        open={strategySelectionOpen}
        onOpenChange={setStrategySelectionOpen}
        selectedStrategies={
          currentGoalIndex !== null && currentMilestoneIndex !== null
            ? form.getValues(`performanceAssessments.${currentGoalIndex}.milestones.${currentMilestoneIndex}.strategies`) || []
            : []
        }
        milestoneId={
          currentGoalIndex !== null && currentMilestoneIndex !== null
            ? form.getValues(`performanceAssessments.${currentGoalIndex}.milestones.${currentMilestoneIndex}.milestoneId`)
            : 0
        }
        onSelectStrategy={handleStrategySelection}
        maxStrategies={5}
      />
    </div>
  );